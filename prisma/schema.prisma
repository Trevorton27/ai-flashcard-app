generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model courses {
  id                            Int                             @id @default(autoincrement())
  title                         String                          @db.VarChar
  description                   String?                         @db.VarChar
  instructor_id                 Int
  updated_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  created_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  users                         users                           @relation(fields: [instructor_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "courses_instructor_id_users_id_fk")
  courses_rels                  courses_rels[]
  lessons                       lessons[]
  payload_locked_documents_rels payload_locked_documents_rels[]

  @@index([created_at])
  @@index([instructor_id], map: "courses_instructor_idx")
  @@index([updated_at])
}

model courses_rels {
  id         Int      @id @default(autoincrement())
  order      Int?
  parent_id  Int
  path       String   @db.VarChar
  lessons_id Int?
  lessons    lessons? @relation(fields: [lessons_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "courses_rels_lessons_fk")
  courses    courses  @relation(fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "courses_rels_parent_fk")

  @@index([lessons_id])
  @@index([order])
  @@index([parent_id], map: "courses_rels_parent_idx")
  @@index([path])
}

model inquiries {
  id                            Int                             @id @default(autoincrement())
  name                          String                          @db.VarChar
  email                         String                          @db.VarChar
  message                       String?                         @db.VarChar
  updated_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  created_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  payload_locked_documents_rels payload_locked_documents_rels[]

  @@index([created_at])
  @@index([updated_at])
}

model lessons {
  id                            Int                             @id @default(autoincrement())
  title                         String                          @db.VarChar
  content                       Json?
  video_url                     String?                         @db.VarChar
  instructor_id                 Int
  updated_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  created_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  course_id                     Int
  courses_rels                  courses_rels[]
  courses                       courses                         @relation(fields: [course_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "lessons_course_id_courses_id_fk")
  users                         users                           @relation(fields: [instructor_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "lessons_instructor_id_users_id_fk")
  payload_locked_documents_rels payload_locked_documents_rels[]

  @@index([course_id], map: "lessons_course_idx")
  @@index([created_at])
  @@index([instructor_id], map: "lessons_instructor_idx")
  @@index([updated_at])
}

model media {
  id                            Int                             @id @default(autoincrement())
  alt                           String                          @db.VarChar
  updated_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  created_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  url                           String?                         @db.VarChar
  thumbnail_u_r_l               String?                         @db.VarChar
  filename                      String?                         @unique(map: "media_filename_idx") @db.VarChar
  mime_type                     String?                         @db.VarChar
  filesize                      Decimal?                        @db.Decimal
  width                         Decimal?                        @db.Decimal
  height                        Decimal?                        @db.Decimal
  focal_x                       Decimal?                        @db.Decimal
  focal_y                       Decimal?                        @db.Decimal
  payload_locked_documents_rels payload_locked_documents_rels[]

  @@index([created_at])
  @@index([updated_at])
}

model payload_locked_documents {
  id                            Int                             @id @default(autoincrement())
  global_slug                   String?                         @db.VarChar
  updated_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  created_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  payload_locked_documents_rels payload_locked_documents_rels[]

  @@index([created_at])
  @@index([global_slug])
  @@index([updated_at])
}

model payload_locked_documents_rels {
  id                       Int                      @id @default(autoincrement())
  order                    Int?
  parent_id                Int
  path                     String                   @db.VarChar
  users_id                 Int?
  media_id                 Int?
  courses_id               Int?
  inquiries_id             Int?
  lessons_id               Int?
  courses                  courses?                 @relation(fields: [courses_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_locked_documents_rels_courses_fk")
  inquiries                inquiries?               @relation(fields: [inquiries_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_locked_documents_rels_inquiries_fk")
  lessons                  lessons?                 @relation(fields: [lessons_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_locked_documents_rels_lessons_fk")
  media                    media?                   @relation(fields: [media_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_locked_documents_rels_media_fk")
  payload_locked_documents payload_locked_documents @relation(fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_locked_documents_rels_parent_fk")
  users                    users?                   @relation(fields: [users_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_locked_documents_rels_users_fk")

  @@index([courses_id])
  @@index([inquiries_id])
  @@index([lessons_id])
  @@index([media_id])
  @@index([order])
  @@index([parent_id], map: "payload_locked_documents_rels_parent_idx")
  @@index([path])
  @@index([users_id])
}

model payload_migrations {
  id         Int      @id @default(autoincrement())
  name       String?  @db.VarChar
  batch      Decimal? @db.Decimal
  updated_at DateTime @default(now()) @db.Timestamptz(3)
  created_at DateTime @default(now()) @db.Timestamptz(3)

  @@index([created_at])
  @@index([updated_at])
}

model payload_preferences {
  id                       Int                        @id @default(autoincrement())
  key                      String?                    @db.VarChar
  value                    Json?
  updated_at               DateTime                   @default(now()) @db.Timestamptz(3)
  created_at               DateTime                   @default(now()) @db.Timestamptz(3)
  payload_preferences_rels payload_preferences_rels[]

  @@index([created_at])
  @@index([key])
  @@index([updated_at])
}

model payload_preferences_rels {
  id                  Int                 @id @default(autoincrement())
  order               Int?
  parent_id           Int
  path                String              @db.VarChar
  users_id            Int?
  payload_preferences payload_preferences @relation(fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_preferences_rels_parent_fk")
  users               users?              @relation(fields: [users_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payload_preferences_rels_users_fk")

  @@index([order])
  @@index([parent_id], map: "payload_preferences_rels_parent_idx")
  @@index([path])
  @@index([users_id])
}

model users {
  id                            Int                             @id @default(autoincrement())
  updated_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  created_at                    DateTime                        @default(now()) @db.Timestamptz(3)
  email                         String                          @unique(map: "users_email_idx") @db.VarChar
  reset_password_token          String?                         @db.VarChar
  reset_password_expiration     DateTime?                       @db.Timestamptz(3)
  salt                          String?                         @db.VarChar
  hash                          String?                         @db.VarChar
  login_attempts                Decimal?                        @default(0) @db.Decimal
  lock_until                    DateTime?                       @db.Timestamptz(3)
  role                          enum_users_role                 @default(student)
  name                          String                          @db.VarChar
  auth_provider                 enum_users_auth_provider        @default(payload)
  clerk_id                      String                          @unique(map: "users_clerk_id_idx") @db.VarChar
  courses                       courses[]
  lessons                       lessons[]
  payload_locked_documents_rels payload_locked_documents_rels[]
  payload_preferences_rels      payload_preferences_rels[]
  users_sessions                users_sessions[]

  @@index([created_at])
  @@index([updated_at])
}

model users_sessions {
  order      Int       @map("_order")
  parent_id  Int       @map("_parent_id")
  id         String    @id @db.VarChar
  created_at DateTime? @db.Timestamptz(3)
  expires_at DateTime  @db.Timestamptz(3)
  users      users     @relation(fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "users_sessions_parent_id_fk")

  @@index([order], map: "users_sessions_order_idx")
  @@index([parent_id], map: "users_sessions_parent_id_idx")
}

enum enum_users_auth_provider {
  payload
  clerk
}

enum enum_users_role {
  admin
  instructor
  student
}

model Flashcard {
  id          String   @id @default(cuid())
  front       String
  back        String
  category    String?
  createdAt   DateTime @default(now())
}
